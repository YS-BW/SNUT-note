# 4. 数据库安全性

## 4.1 概述

- 定义
  - 数据库的安全性问题是指保护数据库免受未经授权的访问、篡改、泄露或破坏，确保数据机密性、完整性和可用性的能力。✨
  
- 主要措施
  - 用户身份鉴别
  - 存取控制
  - 视图

- 安全标准

  - TCSEC
  - CC

- 常用方法和技术

  ##### 权限

  - 用户认证
    - **描述**：验证用户身份，通常通过用户名和密码。
    - **技术**：支持多因素认证（如密码+动态码）。
  - 权限管理
    - **描述**：为用户或角色分配特定操作权限（如SELECT、INSERT）。
    - **技术**：基于角色的访问控制（RBAC），如GRANT、REVOKE语句。

  ##### 数据加密

  - 存储加密
    - **描述**：对存储在磁盘上的数据进行加密，防止物理盗窃。
    - 分类
      - 透明存储加密(性能好,安全性高)
      - 非透明存储加密
  - 传输加密
    - **描述**：对数据在网络中的传输进行加密。
    - 分类
      - 链路加密
      - 端到端加密
  
  ##### 审计与日志
  
  - 操作审计
    - **描述**：记录用户对数据库的所有操作。
    - **技术**：日志文件或审计表，定期分析异常行为。
  - 入侵检测
    - **描述**：实时监控并检测潜在安全威胁。
    - **技术**：基于规则或机器学习的入侵检测系统。
  
  ##### 备份与恢复
  
  - 数据备份
    - **描述**：定期创建数据库副本。
    - **技术**：全量备份、增量备份。
  - 灾难恢复
    - **描述**：在数据丢失或损坏时恢复数据库。
    - **技术**：恢复点和恢复时间目标（RPO/RTO）策略。
  
  

## 4.2 安全性控制

### 4.2.1 存取控制与授权

#### 授权

- 授权:定义权限✨

- ```sql
  GRANT SELECT ON Student TO user1;#授权✨
  REVOKE INSERT ON Student FROM user1;#收回✨
  ```

- 创建数据库模式权限

  - ![image-20250609145803001](D:\临时\image-20250609145803001.png)

#### 存取控制机制

- 组成

  - 定义权限,登记到字典
  - 权限检查

- 常用方法✨

  - 自主存取控制(DAC)[灵活]
    - 通过SQL的`GRANT`和`REVOKE`实现
    - 权限组成
      - 数据对象
      - 操作类型
  - 强制存取控制(MAC)
    - 特点
      - 安全性高
      - 用户不能直接感知或控制
      - 适用于对数据有严格密级分类的部门
    - 敏感度标记
      - 绝密(TS)
      - 机密(S)
      - 可信(C)
      - 公开(P)
      - TS>=S>=C>=P
    - 存取规则
      - 仅当主体的许可证级别**>=**客体的密级时,才能读取
      - 仅当主体的许可证级别**<=**客体的密级时,才能写入
      - ![image-20250609150715557](C:\Users\32770\AppData\Roaming\Typora\typora-user-images\image-20250609150715557.png)

  

### 4.2.2 数据库角色

**角色是权限的集合**

- 创建

  - ```sql
    CREATE ROLE<角色名>
    ```

- 授权

  - ```sql
    GREANT <权限> ON <对象类型> TO <角色>
    ```

- 授予

  - ```sql
    GRANT <角色1> TO <角色2>/<用户1>[WITH ANMIN OPTION]
    ```

- 回收

  - ```sql
    REVOKE <权限> ON <对象类型><对象名字> FROM <角色>
    ```



