# Pandas 函数参考

## 1. pd.Series()

- **简要介绍**: 创建序列对象。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| data         | 输入数据（列表、字典等）| 是       | 无           |
| index        | 索引标签（可选）        | 否       | RangeIndex   |
| dtype        | 数据类型（可选）        | 否       | 推断         |
| name         | 序列名称（可选）        | 否       | 无           |
| copy         | 是否复制数据（可选）    | 否       | False        |

- **示例**
  - `s1 = pd.Series([89, 90, 78, 87, 97])` # 使用列表创建序列
    > ```
    > 0    89
    > 1    90
    > 2    78
    > 3    87
    > 4    97
    > dtype: int64
    > ```
  - `s1 = pd.Series([89, 90, 78], index=['A', 'B', 'C'])` # 指定索引创建序列
    > ```
    > A    89
    > B    90
    > C    78
    > dtype: int64
    > ```
  - `s3 = pd.Series(data=[89, 90, 78, 87, 97], index=['语文', '数学', '英语', '物理', '化学'])` # 使用自定义索引创建
    > ```
    > 语文    89
    > 数学    90
    > 英语    78
    > 物理    87
    > 化学    97
    > dtype: int64
    > ```

## 2. pd.DataFrame()

- **简要介绍**: 创建数据框对象。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| data         | 输入数据（数组、字典等）| 是       | 无           |
| index        | 行索引（可选）          | 否       | RangeIndex   |
| columns      | 列名（可选）            | 否       | RangeIndex   |
| dtype        | 数据类型（可选）        | 否       | 推断         |
| copy         | 是否复制数据（可选）    | 否       | False        |

- **示例**
  - `df1 = pd.DataFrame(np.arange(20).reshape(5, 4), index=['A', 'B', 'C', 'D', 'E'], columns=['foo', 'bar', 'baz', 'qux'])` # 使用数组创建数据框
    > ```
    >    foo  bar  baz  qux
    > A    0    1    2    3
    > B    4    5    6    7
    > C    8    9   10   11
    > D   12   13   14   15
    > E   16   17   18   19
    > ```
  - `df2 = pd.DataFrame({'城市': ['北京', '上海', '西安', '深圳'], '环比': [101.5, 101.3, 119.4, 102.5], '同比': [120.4, 127.3, 119.5, 140.9], '基础': [121.4, 127.6, 120.5, 101.4]})` # 使用字典创建数据框
    > ```
    >    城市    环比    同比    基础
    > 0  北京  101.5  120.4  121.4
    > 1  上海  101.3  127.3  127.6
    > 2  西安  119.4  119.5  120.5
    > 3  深圳  102.5  140.9  101.4
    > ```
  - `df4 = pd.DataFrame(np.random.randint(60, 101, size=(5, 5)), index=['学生1', '学生2', '学生3', '学生4', '学生5'], columns=['语文', '数学', '英语', '地理', '科学'])` # 随机生成学生成绩
    > ```
    >       语文  数学  英语  地理  科学
    > 学生1  84   71   85   83   87
    > 学生2  80   79   71   86   66
    > 学生3  93   73   62   68   89
    > 学生4  81   91   68   98   80
    > 学生5  84   88   74   81   85
    > ```

## 3. pd.set_index()

- **简要介绍**: 设置索引列。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| keys         | 列名或索引列表          | 是       | 无           |
| drop         | 是否删除原列（可选）    | 否       | True         |
| append       | 是否追加索引（可选）    | 否       | False        |
| inplace      | 是否原地修改（可选）    | 否       | False        |
| verify_integrity | 验证唯一性（可选）    | 否       | False        |

- **示例**
  - `df2 = df2.set_index('城市')` # 将 '城市' 列设为索引
    > ```
    >        环比    同比    基础
    > 城市                  
    > 北京  101.5  120.4  121.4
    > 上海  101.3  127.3  127.6
    > 西安  119.4  119.5  120.5
    > 深圳  102.5  140.9  101.4
    > ```
  - `df2.index = ['A', 'B', 'C', 'D']` # 手动设置索引后使用 set_index
    > ```
    >    城市    环比    同比    基础
    > A  北京  101.5  120.4  121.4
    > B  上海  101.3  127.3  127.6
    > C  西安  119.4  119.5  120.5
    > D  深圳  102.5  140.9  101.4
    > ```

## 4. pd.read_csv()

- **简要介绍**: 读取 CSV 文件。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| filepath_or_buffer | 文件路径            | 是       | 无           |
| sep          | 分隔符（可选）          | 否       | ','          |
| header       | 列名行号（可选）        | 否       | 0            |
| index_col    | 索引列（可选）          | 否       | 无           |
| dtype        | 数据类型（可选）        | 否       | 推断         |

- **示例**
  - `df = pd.read_csv('nba.csv')` # 读取 'nba.csv' 文件
    > ```
    >                  Name            Team  Number Position   Age ...
    > 0    Avery Bradley  Boston Celtics     0.0       PG  25.0 ...
    > 1      Jae Crowder  Boston Celtics    99.0       SF  25.0 ...
    > ```
  - `df = pd.read_csv('nba.csv', index_col=0)` # 使用第一列作为索引
    > ```
    >             Team  Number Position   Age ...
    > Name                                ...
    > Avery Bradley  Boston Celtics     0.0       PG  25.0 ...
    > Jae Crowder    Boston Celtics    99.0       SF  25.0 ...
    > ```

## 5. pd.read_excel()

- **简要介绍**: 读取 Excel 文件。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| io           | 文件路径或文件对象      | 是       | 无           |
| sheet_name   | 工作表名（可选）        | 否       | 0            |
| header       | 列名行号（可选）        | 否       | 0            |
| index_col    | 索引列（可选）          | 否       | 无           |

- **示例**
  - `df = pd.read_excel('team.xlsx')` # 读取 'team.xlsx' 默认工作表
    > ```
    >     name team  Q1  Q2  Q3  Q4
    > 0  Liver    E  89  21  24  64
    > 1   Arry    C  36  37  37  57
    > ```
  - `excel = pd.read_excel('score.xlsx', sheet_name=[0, 1], header=0)` # 读取多个工作表
    > ```
    > {0:      学号   姓名 性别  语文  数学  英语
    >   0  1001   胡辉  男  98  72  87
    >   1  1002  梁小洁  女  83  65  51
    >   , 1:      学号   职务
    >   0  1001   班长
    >   1  1002   体育委员
    > }
    > ```

## 6. pd.to_csv()

- **简要介绍**: 导出为 CSV 文件。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| path_or_buf  | 输出路径（可选）        | 否       | 无           |
| sep          | 分隔符（可选）          | 否       | ','          |
| index        | 是否写入索引（可选）    | 否       | True         |
| header       | 是否写入列名（可选）    | 否       | True         |

- **示例**
  - `df.to_csv('output.csv')` # 导出 DataFrame 到 'output.csv'
    > (生成文件 'output.csv'，内容根据 df 数据)
  - `data.to_csv('data.txt', sep='\t')` # 导出为 TXT 文件，使用制表符分隔
    > (生成文件 'data.txt'，内容以制表符分隔)

## 7. pd.to_excel()

- **简要介绍**: 导出为 Excel 文件。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| excel_writer | 输出路径或 writer 对象  | 是       | 无           |
| sheet_name   | 工作表名（可选）        | 否       | 'Sheet1'     |
| index        | 是否写入索引（可选）    | 否       | True         |

- **示例**
  - `students.to_excel('students.xlsx')` # 导出到 'students.xlsx'
    > (生成文件 'students.xlsx'，包含 students 数据)
  - `df.to_excel('team_output.xlsx', sheet_name='TeamData')` # 指定工作表名导出
    > (生成文件 'team_output.xlsx'，工作表名为 'TeamData')

## 8. pd.sort_values()

- **简要介绍**: 按值排序。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| by           | 排序列名或列表          | 是       | 无           |
| axis         | 排序轴（0为行，1为列）  | 否       | 0            |
| ascending    | 是否升序（可选）        | 否       | True         |
| inplace      | 是否原地修改（可选）    | 否       | False        |

- **示例**
  - `df.sort_values(by=['team', 'Q1'], inplace=True)` # 按 'team' 和 'Q1' 升序排序
    > ```
    >      name team  Q1  Q2  Q3  Q4
    > 7    Lfie    A   9  10  99  37
    > 51  Hugo0    A  28  25  14  71
    > ```
  - `score.sort_values(by=['总分'], ascending=False)` # 按 '总分' 降序排序
    > ```
    >    学号   姓名 性别  语文  数学  英语  总分
    > 6  1007  王国钰  女  88  96  83  267
    > 4  1005   曹星  男  94  69  97  260
    > ```

## 9. pd.groupby()

- **简要介绍**: 分组数据。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| by           | 分组依据（列名或函数）  | 是       | 无           |
| axis         | 分组轴（0为行，1为列）  | 否       | 0            |
| level        | 分组层级（可选）        | 否       | 无           |

- **示例**
  - `dft.groupby('省份')` # 按 '省份' 分组
    > (返回 GroupBy 对象，可进一步聚合)
  - `score.groupby('性别')['总分'].mean()` # 按 '性别' 分组求 '总分' 均值
    > ```
    > 性别
    > 女    220.67
    > 男    232.75
    > Name: 总分, dtype: float64
    > ```

## 10. pd.agg()

- **简要介绍**: 聚合数据。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| func         | 聚合函数或字典          | 是       | 无           |
| axis         | 聚合轴（0为行，1为列）  | 否       | 0            |

- **示例**
  - `grouped = dft.groupby('省份').agg({'GDP': 'sum', '人口': 'sum'})` # 按 '省份' 求和
    > ```
    >         GDP  人口
    > 省份           
    > 广东  43786  2494
    > 江苏  29034  1892
    > 浙江  22402  1707
    > ```
  - `dft.groupby('省份').agg({'GDP': 'max', '人口': 'max'})` # 按 '省份' 求最大值
    > ```
    >         GDP  人口
    > 省份           
    > 广东  22286  1404
    > 江苏  17319  1065
    > 浙江  12556   919
    > ```

## 11. pd.cut()

- **简要介绍**: 分段分类。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| x            | 输入数据                | 是       | 无           |
| bins         | 分段边界                | 是       | 无           |
| labels       | 标签（可选）            | 否       | 无           |
| include_lowest | 包含最低值（可选）    | 否       | False        |

- **示例**
  - `score['等级'] = pd.cut(score['总分'], bins=[-float('inf'), 210, 270, float('inf')], labels=['C', 'B', 'A'])` # 按总分分级
    > ```
    >    学号   姓名 性别  语文  数学  英语  总分  等级
    > 0  1001   胡辉  男  98  72  87  257   B
    > 1  1002  梁小洁  女  83  65  51  199   C
    > ```
  - `pd.cut([0, 1, 2, 3], bins=2, labels=['Low', 'High'])` # 简单分段示例
    > ```
    > [Low, Low, High, High]
    > Categories (2, object): ['Low' < 'High']
    > ```

## 12. pd.merge()

- **简要介绍**: 合并数据框。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| left         | 左数据框                | 是       | 无           |
| right        | 右数据框                | 是       | 无           |
| on           | 合并键（可选）          | 否       | 无           |
| how          | 合并方式（可选）        | 否       | 'inner'      |

- **示例**
  - `students = score.merge(duty, on='学号', how='left')` # 左连接合并
    > ```
    >    学号   姓名 性别  语文  数学  英语  总分  等级  职务
    > 0  1001   胡辉  男  98  72  87  257   B   班长
    > 1  1002  梁小洁  女  83  65  51  199   C   体育委员
    > ```
  - `df1.merge(df2, how='outer')` # 外连接合并
    > ```
    >   employee       group  salary
    > 0      Bob  Accounting  80000
    > 1     Jake  Engineering 120000
    > 2     Lisa  Engineering  70000
    > 3      Tom         NaN   8000
    > ```

## 13. pd.concat()

- **简要介绍**: 连接数据框。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| objs         | 待连接对象列表          | 是       | 无           |
| axis         | 连接轴（0为行，1为列）  | 否       | 0            |
| join         | 连接方式（可选）        | 否       | 'outer'      |

- **示例**
  - `df3 = pd.concat([df1, df2])` # 按行连接
    > ```
    >    A   B
    > 0  A0  B0
    > 1  A1  B1
    > 2  A2  B2
    > 3  A3  B3
    > 0  A4  B4
    > 1  A5  B5
    > ```
  - `df = pd.concat([df1, df2], axis=1)` # 按列连接
    > ```
    >    A   B   A   B
    > 0  A0  B0  A4  B4
    > 1  A1  B1  A5  B5
    > 2  A2  B2  A6  B6
    > 3  A3  B3  A7  B7
    > ```

## 14. pd.fillna()

- **简要介绍**: 填充缺失值。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| value        | 填充值（标量或字典）    | 是       | 无           |
| method       | 填充方法（可选）        | 否       | 无           |
| inplace      | 是否原地修改（可选）    | 否       | False        |

- **示例**
  - `students['职务'] = students['职务'].fillna("未知")` # 填充 '职务' 列的空值为 '未知'
    > ```
    >    学号   姓名 性别  语文  数学  英语  总分  等级  职务
    > 0  1001   胡辉  男  98  72  87  257   B   班长
    > 2  1003  屈佳丽  女  66  78  52  196   C   未知
    > ```
  - `df.fillna(0)` # 填充所有缺失值为 0
    > (根据 df 数据填充结果)

## 15. pd.T()

- **简要介绍**: 转置数据框。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| (无参数)     | 无参数，直接转置        | 无       | 无           |

- **示例**
  - `print(df1.T)` # 转置 df1 数据框
    > ```
    >    A   B   C   D   E
    > foo  0   4   8  12  16
    > bar  1   5   9  13  17
    > baz  2   6  10  14  18
    > qux  3   7  11  15  19
    > ```
  - `df2.T` # 转置 df2 数据框
    > ```
    >       A      B      C      D
    > 城市    北京    上海    西安    深圳
    > 环比  101.5  101.3  119.4  102.5
    > 同比  120.4  127.3  119.5  140.9
    > 基础  121.4  127.6  120.5  101.4
    > ```

## 16. pd.head()

- **简要介绍**: 查看前几行。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| n            | 行数（可选）            | 否       | 5            |

- **示例**
  - `print(df.head(5))` # 查看前 5 行
    > ```
    >                Name            Team  Number Position   Age ...
    > 0  Avery Bradley  Boston Celtics     0.0       PG  25.0 ...
    > 1    Jae Crowder  Boston Celtics    99.0       SF  25.0 ...
    > ```
  - `score.head(3)` # 查看前 3 行
    > ```
    >    学号   姓名 性别  语文  数学  英语
    > 0  1001   胡辉  男  98  72  87
    > 1  1002  梁小洁  女  83  65  51
    > 2  1003  屈佳丽  女  66  78  52
    > ```

## 17. pd.tail()

- **简要介绍**: 查看后几行。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| n            | 行数（可选）            | 否       | 5            |

- **示例**
  - `print(df.tail(5))` # 查看后 5 行
    > ```
    >                 Name       Team  Number Position   Age ...
    > 453  Shelvin Mack  Utah Jazz     8.0       PG  26.0 ...
    > 454     Raul Neto  Utah Jazz    25.0       PG  24.0 ...
    > ```
  - `df.tail(3)` # 查看后 3 行
    > ```
    >                 Name       Team  Number Position   Age ...
    > 455  Tibor Pleiss  Utah Jazz    21.0        C  26.0 ...
    > 456   Jeff Withey  Utah Jazz    24.0        C  26.0 ...
    > 457           NaN        NaN     NaN      NaN   NaN ...
    > ```

## 18. pd.info()

- **简要介绍**: 显示数据信息。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| verbose      | 是否详细输出（可选）    | 否       | True         |
| null_counts  | 显示空值数（可选）      | 否       | True         |

- **示例**
  - `print(df.info())` # 显示 'nba.csv' 基本信息
    > ```
    > <class 'pandas.core.frame.DataFrame'>
    > RangeIndex: 458 entries, 0 to 457
    > Data columns (total 9 columns):
    >  #   Column    Non-Null Count  Dtype  
    > ---  ------    --------------  -----  
    > 0   Name      457 non-null    object 
    > ...
    > ```
  - `students.info()` # 显示 'students' 基本信息
    > ```
    > <class 'pandas.core.frame.DataFrame'>
    > RangeIndex: 7 entries, 0 to 6
    > Data columns (total 10 columns):
    >  #   Column  Non-Null Count  Dtype   
    > ---  ------  --------------  -----   
    > 0   学号      7 non-null      int64   
    > ...
    > ```

## 19. pd.describe()

- **简要介绍**: 描述性统计。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| include      | 数据类型（可选）        | 否       | None         |
| exclude      | 排除类型（可选）        | 否       | None         |

- **示例**
  - `print(df.describe())` # 显示 'nba.csv' 描述性统计
    > ```
    >               Number         Age      Weight        Salary
    > count  457.000000  457.000000  457.000000  4.460000e+02
    > mean    17.678337   26.938731  221.522976  4.842684e+06
    > ...
    > ```
  - `score.describe()` # 显示 'score' 描述性统计
    > (根据 score 数据生成统计结果)

## 20. pd.loc()

- **简要介绍**: 标签定位。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| key          | 行/列标签（必填）       | 是       | 无           |
| (多参数)     | 行和列组合（可选）      | 否       | 无           |

- **示例**
  - `print(df2.loc[['a', 'b'], :])` # 选择 'a' 和 'b' 行
    > ```
    >    城市     环比     同比     基础
    > a  北京  101.5  120.4  121.4
    > b  上海  101.3  127.3  127.6
    > ```
  - `df2.loc[:, '城市']` # 选择所有行 '城市' 列
    > ```
    > a    北京
    > b    上海
    > c    西安
    > d    深圳
    > Name: 城市, dtype: object
    > ```

## 21. pd.iloc()

- **简要介绍**: 位置定位。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| key          | 行/列位置（必填）       | 是       | 无           |
| (多参数)     | 行和列组合（可选）      | 否       | 无           |

- **示例**
  - `print(df2.iloc[0])` # 选择第一行
    > ```
    > 城市       北京
    > 环比    101.5
    > 同比    120.4
    > 基础    121.4
    > Name: a, dtype: object
    > ```
  - `df2.iloc[0:2, :]` # 选择前两行
    > ```
    >    城市     环比     同比     基础
    > a  北京  101.5  120.4  121.4
    > b  上海  101.3  127.3  127.6
    > ```

## 22. pd.sum()

- **简要介绍**: 求和计算。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| axis         | 轴向（0为列，1为行）    | 否       | 0            |
| skipna       | 忽略 NA（可选）         | 否       | True         |

- **示例**
  - `score['总分'] = score.loc[:, ['数学', '语文', '英语']].sum(axis=1)` # 按行求和
    > ```
    > 0    257
    > 1    199
    > 2    196
    > ...
    > ```
  - `dft['人口'].sum()` # 求 '人口' 列总和
    > ```
    > 6093
    > ```

## 23. pd.mean()

- **简要介绍**: 求均值。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| axis         | 轴向（0为列，1为行）    | 否       | 0            |
| skipna       | 忽略 NA（可选）         | 否       | True         |

- **示例**
  - `score.groupby('性别')['总分'].mean()` # 按 '性别' 求 '总分' 均值
    > ```
    > 性别
    > 女    220.67
    > 男    232.75
    > Name: 总分, dtype: float64
    > ```
  - `dft['人口'].mean()` # 求 '人口' 列均值
    > ```
    > 1015.5
    > ```

## 24. pd.max()

- **简要介绍**: 求最大值。
- **参数列表**:

| 参数名       | 描述                   | 是否必填 | 默认值       |
|--------------|------------------------|----------|--------------|
| axis         | 轴向（0为列，1为行）    | 否       | 0            |
| skipna       | 忽略 NA（可选）         | 否       | True         |

- **示例**
  - `score.groupby('性别')['总分'].max()` # 按 '性别' 求 '总分' 最大值
    > ```
    > 性别
    > 女    267
    > 男    260
    > Name: 总分, dtype: int64
    > ```
  - `dft['GDP'].max()` # 求 'GDP' 列最大值
    > ```
    > 22286
    > ```